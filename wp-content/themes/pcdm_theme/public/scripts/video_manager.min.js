(function(){var i=function(i,e){return function(){return i.apply(e,arguments)}};window.VideoManager=function(){function e(e){this.ref=e,this.onVideoFinish=i(this.onVideoFinish,this),this.onVideoReady=i(this.onVideoReady,this),this.onVideoClosed=i(this.onVideoClosed,this),this.onVideoOpened=i(this.onVideoOpened,this),this.onCloseClick=i(this.onCloseClick,this),this.onLinkClick=i(this.onLinkClick,this),this.items=this.ref.find(".item-video"),this.items.length>0&&(this.video_array=[],this.dur=1,window.onVideoReady=this.onVideoReady,event_emitter.addListener("VIDEO_FINISH",this.onVideoFinish),this.setVideoArray(),this.setInteractions())}return e.prototype.setVideoArray=function(){var i,e,t,o,n,s,r,d,a,h,c,l,p,y;for(y=[],t=l=0,p=this.items.length;p>=0?p>l:l>p;t=p>=0?++l:--l)s=$(this.items[t]),a=s.find(".wrap-more .more"),h=s.find(".wrap-video"),e=h.find(".link-video"),d=e.find(".ico-video"),i=h.find(".close"),c=h.find(".js-vimeo"),o=c.attr("id"),n=new VimeoPlayer(c),r={id:o,instance:n,is_ready:!0,is_enabled:!0,play_text:a,play_ico:d,cover:e,close:i},y.push(this.video_array.push(r));return y},e.prototype.setInteractions=function(i){var e,t,o,n,s;for(s=[],e=o=0,n=this.video_array.length;n>=0?n>o:o>n;e=n>=0?++o:--o)t=this.video_array[e],i=t.id,t.play_text.attr("data-id",i).bind("click",this.onLinkClick),t.cover.attr("data-id",i).bind("click",this.onLinkClick),s.push(t.close.attr("data-id",i).bind("click",this.onCloseClick));return s},e.prototype.onLinkClick=function(i){var e,t;return i.preventDefault(),e=$(i.currentTarget).attr("data-id"),t=this.getVideoById(e),t.is_ready?this.openVideo(e):void 0},e.prototype.onCloseClick=function(i){var e,t;return i.preventDefault(),e=$(i.currentTarget).attr("data-id"),t=this.getVideoById(e),this.closeVideo(e)},e.prototype.openVideo=function(i){var e;return e=this.getVideoById(i),e.is_enabled?(e.is_enabled=!1,e.play_text.css({visibility:"hidden"}),TweenLite.to(e.cover,this.dur,{css:{opacity:"0"},ease:Power4.easeInOut,onComplete:this.onVideoOpened,onCompleteParams:[e]})):void 0},e.prototype.onVideoOpened=function(i){return i.cover.hide(),i.instance.play(),i.is_enabled=!0},e.prototype.closeVideo=function(i){var e;return e=this.getVideoById(i),e.is_enabled?(e.is_enabled=!1,e.instance.stop(),e.cover.show(),TweenLite.to(e.cover,this.dur,{css:{opacity:"1"},ease:Power4.easeInOut,onComplete:this.onVideoClosed,onCompleteParams:[e]})):void 0},e.prototype.onVideoClosed=function(i){return i.instance.reset(),i.play_text.css({visibility:"visible"}),i.is_enabled=!0},e.prototype.onVideoReady=function(i){var e;return e=this.getVideoById(i),e.play_text.css({visibility:"visible"}),e.play_ico.css({visibility:"visible"}),e.is_ready=!0},e.prototype.onVideoFinish=function(i){return this.closeVideo(i)},e.prototype.getVideoById=function(i){var e,t,o,n,s;for(t=0,e=n=0,s=this.video_array.length;s>=0?s>n:n>s;e=s>=0?++n:--n)if(o=this.video_array[e],o.id===i){t=e;break}return o=this.video_array[t]},e}()}).call(this);
