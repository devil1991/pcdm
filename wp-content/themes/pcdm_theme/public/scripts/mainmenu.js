(function(){var t=function(t,s){return function(){return t.apply(s,arguments)}};window.MainMenu=function(){function s(s){return this.ref=s,this.showMobileSub=t(this.showMobileSub,this),this.closeLastSub=t(this.closeLastSub,this),this.isMobileSize=t(this.isMobileSize,this),this.onResize=t(this.onResize,this),e?e:(e=this,this.menuItem=$(".main-menu__item"),this.sub=$("#main-menu__subs"),this.subs=$("#main-menu__subs .main-menu__item__sub"),this.subBlocks=$(".main-menu__image-block"),this.bwrap=$(".aux-body-simulator"),this.doc=$(document),this.status={isMobile:!1,mobileOpen:!1,lastsub:null,isOpen:!1,baseWidth:$(window).width()},this.isAnimating=!1,this.onResize(),void this.listners())}var e;return e=null,s.prototype.setDOM=function(){var t,s,e,i,n,o;if(!this.isMobileSize()){for(this.status.isMobile=!1,this.status.mobileOpen=!1,this.ref.attr("style",""),this.sub.attr("style",""),this.subBlocks.attr("style",""),this.subs.attr("style",""),t=[],s=0,this.sub.css({display:"block",visibility:"hidden"}),n=this.subs,e=0,i=n.length;i>e;e++)o=n[e],o=$(o),o.css({display:"block",visibility:"hidden"}),t.push(o.height()),s+=o.innerWidth(),this.status.baseWidth=o.innerWidth(),o.width(o.innerWidth()),o.css({display:"none",visibility:"visible"});return this.sub.height(Math.max.apply(Math,t)),this.subs.height(Math.max.apply(Math,t)),this.subBlocks.height(Math.max.apply(Math,t)),this.sub.css({display:"none",visibility:"visibile",width:s})}return this.sub.attr("style",""),this.subs.attr("style",""),this.subBlocks.attr("style",""),this.status.isMobile?void 0:(this.status.isMobile=!0,this.setIscrolls())},s.prototype.setIscrolls=function(){var t,s,e,i,n,o;for(i=this.subs,n=[],s=0,e=i.length;e>s;s++)o=i[s],t=$(o),n.push(t.data("scroll",new IScroll(o,{mouseWheel:!0,scrollbars:!0,click:!0})));return n},s.prototype.refreshIscroll=function(t){return setTimeout(function(){return null!=t.data().scroll?t.data().scroll.refresh():void 0},200)},s.prototype.setCurrentMenuImage=function(t){var s,e,i;return e=t.closest(".main-menu__item__sub"),s=e.find(".hoverImage"),i=new Image,i.src=t.data().image,i.onload=function(t){return function(){return s.html(i)}}(this)},s.prototype.preloadMenuImages=function(){var t,s,e,i,n,o,u,r,a,l,h,c;for(l=$(".links-block__link"),i=0,u=l.length;u>i;i++)a=l[i],t=$(a).data("image"),n=new Image,n.onload=this.onResize,n.src=t;for(h=$(".main-menu__item__sub"),c=[],o=0,r=h.length;r>o;o++)e=h[o],s=$(e).find(".links-block__link"),s.length?c.push(this.setCurrentMenuImage(s.eq(0))):c.push(void 0);return c},s.prototype.listners=function(){return this.preloadMenuImages(),this.doc.on("click",".open-nav,.main-menu-label,.main-menu__back,#wrap-body",function(t){return function(s){var e;return e=$(s.currentTarget),e.hasClass("open-nav")&&(s.preventDefault(),t.toggleMobileMenu(!t.status.mobileOpen),$("body").toggleClass("sidebar-open",!t.status.mobileOpen)),t.isMobileSize()&&e.hasClass("main-menu-label")&&(s.preventDefault(),t.showMobileSub(e.parent(".main-menu__item").index())),e.hasClass("main-menu__back")&&(s.preventDefault(),t.closeLastSub()),e.is("#wrap-body")&&t.status.mobileOpen?(s.preventDefault(),t.toggleMobileMenu(!t.status.mobileOpen)):void 0}}(this)),$("body").mouseleave(function(t){return function(s){return t.closeNavigation()}}(this)),this.doc.on("click",".main-menu-label,.aux-body-simulator",function(t){return function(s){var e,i;if(t.isMobileSize()){if(t.status.isOpen)return t.closeNavigation()}else if(e=$(s.currentTarget),e.hasClass("main-menu-label")&&(i=e.parent(".main-menu__item"),t.slideTo(i.index())),e.hasClass("aux-body-simulator")&&t.status.isOpen)return t.closeNavigation()}}(this)),$(window).on("resize",$.throttle(300,this.onResize))},s.prototype.onResize=function(){return this.setDOM()},s.prototype.openNavigation=function(){var t,s;return t=$.Deferred(),s=!1,this.ref.addClass("main-menu-open"),this.status.isOpen?(s=!0,t.resolve()):(this.status.isOpen=!0,this.sub.velocity({properties:{translateY:[0,-300]},options:{easing:[200,40],duration:800,display:"block",queue:!1,progress:function(e){return function(e,i){return!s&&i>.1?(s=!0,t.resolve(),e):void 0}}(this),complete:function(t){return function(){}}(this)}})),t.promise()},s.prototype.isMobileSize=function(){return $(window).width()<=1020},s.prototype.closeNavigation=function(){return this.status.lastsub=null,this.ref.removeClass("main-menu-open"),this.sub.velocity({properties:{translateY:-300},options:{duration:400,easing:"easeInQuart",display:"none",queue:!1,complete:function(t){return function(){return t.status.lastsub=null,t.status.isOpen=!1,t.subs.css({display:"none"}),t.menuItem.removeClass("current-menu")}}(this)}})},s.prototype.slideTo=function(t,s){var e,i;return null==s&&(s=!1),e=t*this.status.baseWidth,i=this.subs.eq(t),s?($.Velocity.hook(this.sub,"translateX","0px"),this.status.lastsub=t,this.menuItem.removeClass("current-menu")):null!=this.status.lastsub&&this.status.lastsub===t?void this.closeNavigation():(this.menuItem.removeClass("current-menu"),this.menuItem.eq(t).addClass("current-menu"),this.openNavigation().then(function(s){return function(){return null!=s.status.lastsub&&s.subs.eq(s.status.lastsub).velocity("fadeOut",{duration:1200,delay:300,queue:!1,begin:function(t){return $(t).css("zIndex",5)}}),s.status.lastsub=t,i.velocity("fadeIn",{display:"block",queue:!1,duration:800,begin:function(t){return $(t).css("zIndex",10)},complete:function(){return s.status.lastsub=t}})}}(this)))},s.prototype.toggleMobileMenu=function(t){var s;return s=$.Deferred(),t?(this.ref.css("display","block"),this.bwrap.velocity({properties:{translateX:300},options:{easing:"easeOutSine",complete:function(t){return function(){return t.status.mobileOpen=!0,s.resolve()}}(this)}})):this.closeLastSub().then(function(t){return function(){return t.bwrap.velocity({properties:{translateX:0},options:{easing:"easeOutQuint",complete:function(){return t.ref.css("display","none"),t.status.mobileOpen=!1,s.resolve()}}})}}(this)),s.promise()},s.prototype.closeLastSub=function(t){var s;return s=$.Deferred(),null!==this.status.lastsub?this.status.lastsub.velocity({properties:{translateX:-1*this.status.lastsub.width()},options:{display:"none",complete:function(t){return function(){return t.sub.css("display","none"),t.status.lastsub=null,s.resolve()}}(this)}}):s.resolve(),s.promise()},s.prototype.showMobileSub=function(t){var s,e;return s=$.Deferred(),e=this.subs.eq(t),this.sub.css("display","block"),e.velocity({properties:{translateX:[0,-1*e.width()]},options:{display:"block",complete:function(t){return function(){return t.refreshIscroll(e),t.status.lastsub=e,s.resolve()}}(this)}}),s.promise()},s}()}).call(this);