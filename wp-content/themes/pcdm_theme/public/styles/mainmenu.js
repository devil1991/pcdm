(function(){var t=function(t,s){return function(){return t.apply(s,arguments)}};window.MainMenu=function(){function s(s){return this.ref=s,this.showMobileSub=t(this.showMobileSub,this),this.closeLastSub=t(this.closeLastSub,this),this.isMobileSize=t(this.isMobileSize,this),this.onResize=t(this.onResize,this),e?e:(e=this,this.menuItem=$(".main-menu__item"),this.sub=$("#main-menu__subs"),this.subs=$("#main-menu__subs .main-menu__item__sub"),this.subBlocks=$(".main-menu__image-block"),this.bwrap=$(".aux-body-simulator"),this.doc=$(document),this.status={isMobile:!1,mobileOpen:!1,lastsub:null,isOpen:!1,baseWidth:$(window).width()},this.isAnimating=!1,this.onResize(),void this.listners())}var e;return e=null,s.prototype.setDOM=function(){var t,s,e,i,n,o;if(!this.isMobileSize()){for(this.status.isMobile=!1,this.status.mobileOpen=!1,this.ref.attr("style",""),this.sub.attr("style",""),this.subBlocks.attr("style",""),this.subs.attr("style",""),s=[],o=0,this.sub.css({display:"block",visibility:"hidden"}),n=this.subs,e=0,i=n.length;i>e;e++)t=n[e],t=$(t),t.css({display:"block",visibility:"hidden"}),s.push(t.height()),o+=t.innerWidth(),this.status.baseWidth=t.innerWidth(),t.width(t.innerWidth()),t.css({left:t.index()*t.width()}),t.css({display:"none",visibility:"visible"});return this.sub.height(Math.max.apply(Math,s)),this.subs.height(Math.max.apply(Math,s)),this.subBlocks.height(Math.max.apply(Math,s)),this.sub.css({display:"none",visibility:"visibile",width:o})}return this.sub.attr("style",""),this.subs.attr("style",""),this.subBlocks.attr("style",""),this.status.isMobile?void 0:(this.status.isMobile=!0,this.setIscrolls())},s.prototype.setIscrolls=function(){var t,s,e,i,n,o;for(n=this.subs,o=[],e=0,i=n.length;i>e;e++)t=n[e],s=$(t),o.push(s.data("scroll",new IScroll(t,{mouseWheel:!0,scrollbars:!0,click:!0})));return o},s.prototype.refreshIscroll=function(t){return setTimeout(function(){return null!=t.data().scroll?t.data().scroll.refresh():void 0},200)},s.prototype.setCurrentMenuImage=function(t){var s,e,i;return i=t.closest(".main-menu__item__sub"),e=i.find(".hoverImage img"),s=new Image,s.src=t.data().image,i.html(s)},s.prototype.preloadMenuImages=function(){var t,s,e,i,n,o,r,u,a,l,h,c;for(i=$(".links-block__link"),n=0,u=i.length;u>n;n++)e=i[n],o=$(e).data("image"),s=new Image,s.onload=this.onResize,s.src=o;for(h=$(".main-menu__item__sub"),c=[],r=0,a=h.length;a>r;r++)t=h[r],l=$(t).find(".links-block__link"),c.push(l.length?this.setCurrentMenuImage(l.eq(0)):void 0);return c},s.prototype.listners=function(){return this.preloadMenuImages(),this.doc.on("click",".open-nav,.main-menu-label,.main-menu__back,#wrap-body",function(t){return function(s){var e;return e=$(s.currentTarget),e.hasClass("open-nav")&&(s.preventDefault(),t.toggleMobileMenu(!t.status.mobileOpen),$("body").toggleClass("sidebar-open",!t.status.mobileOpen)),e.hasClass("main-menu-label")&&(s.preventDefault(),t.showMobileSub(e.parent(".main-menu__item").index())),e.hasClass("main-menu__back")&&(s.preventDefault(),t.closeLastSub()),e.is("#wrap-body")&&t.status.mobileOpen?(s.preventDefault(),t.toggleMobileMenu(!t.status.mobileOpen)):void 0}}(this)),this.doc.on("mouseenter",".links-block__link",function(t){return function(s){return t.setCurrentMenuImage($(s.currentTarget))}}(this)),this.doc.on("mouseenter",".main-menu-label,.aux-body-simulator",$.throttle(100,function(t){return function(s){var e,i;if(t.isMobileSize()){if(t.status.isOpen)return t.closeNavigation()}else if(e=$(s.currentTarget),e.hasClass("main-menu-label")&&(i=e.parent(".main-menu__item"),t.slideTo(i.index())),e.hasClass("aux-body-simulator")&&t.status.isOpen)return t.closeNavigation()}}(this))),$(window).on("resize",$.throttle(300,this.onResize))},s.prototype.onResize=function(){return this.setDOM()},s.prototype.openNavigation=function(){var t,s;return s=$.Deferred(),t=!1,this.ref.addClass("main-menu-open"),this.status.isOpen?(t=!0,s.resolve()):(this.status.isOpen=!0,this.subs.css({display:"block"}),this.sub.velocity({properties:{translateY:[0,-1*this.sub.height()]},options:{easing:[200,40],duration:800,display:"block",queue:!1,progress:function(e){return function(e,i){return!t&&i>.2?(console.log(i),t=!0,s.resolve(),e):void 0}}(this),complete:function(t){return function(){}}(this)}})),s.promise()},s.prototype.isMobileSize=function(){return $(window).width()<=1020},s.prototype.closeNavigation=function(){return this.ref.removeClass("main-menu-open"),this.sub.velocity({properties:{translateY:-1*this.sub.height()},options:{duration:400,easing:"easeInQuart",display:"none",queue:!1,complete:function(t){return function(){return t.status.isOpen=!1,t.subs.css({display:"none"}),t.slideTo(0,!0)}}(this)}})},s.prototype.slideTo=function(t,s){var e;return null==s&&(s=!1),e=t*this.status.baseWidth,s?($.Velocity.hook(this.sub,"translateX","0px"),this.status.lastsub=t,this.menuItem.removeClass("current-menu")):(this.menuItem.removeClass("current-menu"),this.menuItem.eq(t).addClass("current-menu"),this.openNavigation().then(function(s){return function(){return s.sub.velocity({properties:{translateX:-1*e,translateY:0},options:{easing:"easeOutQuint",display:"block",queue:!1,duration:1600,complete:function(){return s.status.lastsub=t}}})}}(this)))},s.prototype.toggleMobileMenu=function(t){var s;return s=$.Deferred(),t?(this.ref.css("display","block"),this.bwrap.velocity({properties:{translateX:300},options:{easing:"easeOutSine",complete:function(t){return function(){return t.status.mobileOpen=!0,s.resolve()}}(this)}})):this.closeLastSub().then(function(t){return function(){return t.bwrap.velocity({properties:{translateX:0},options:{easing:"easeOutQuint",complete:function(){return t.ref.css("display","none"),t.status.mobileOpen=!1,s.resolve()}}})}}(this)),s.promise()},s.prototype.closeLastSub=function(t){var s;return s=$.Deferred(),null!==this.status.lastsub?this.status.lastsub.velocity({properties:{translateX:-1*this.status.lastsub.width()},options:{display:"none",complete:function(t){return function(){return t.sub.css("display","none"),t.status.lastsub=null,s.resolve()}}(this)}}):s.resolve(),s.promise()},s.prototype.showMobileSub=function(t){var s,e;return e=$.Deferred(),s=this.subs.eq(t),this.sub.css("display","block"),s.velocity({properties:{translateX:[0,-1*s.width()]},options:{display:"block",complete:function(t){return function(){return t.refreshIscroll(s),t.status.lastsub=s,e.resolve()}}(this)}}),e.promise()},s}()}).call(this);