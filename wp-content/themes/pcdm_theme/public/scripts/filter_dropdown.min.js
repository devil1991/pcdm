(function(){var t=function(t,i){return function(){return t.apply(i,arguments)}};window.FilterDropdown=function(){function i(i,e){this.ref=i,this.param=e,this.closeList=t(this.closeList,this),this.openList=t(this.openList,this),this.onItemClick=t(this.onItemClick,this),this.onButtonClick=t(this.onButtonClick,this),this.disableFilter=t(this.disableFilter,this),this.enableFilter=t(this.enableFilter,this),this.initFilter=t(this.initFilter,this),this.btn=this.ref.find("dt"),this.label=this.btn.find("span"),this.list=this.ref.find("dd"),this.item_template=$(this.list.find(">ul >li")[0]),this.value="",this.dur=.8,this.initFilter()}return i.prototype.initFilter=function(t){var i,e,s,n,l,o,r;if(this.list.css({visibility:"hidden",opacity:"0"}),void 0!==t)if(this.updateLabel(t.label),this.list.find(">ul >li").remove(),i=t.list,i.length>0)for(this.btn.removeClass("disabled"),s=o=0,r=i.length;r>=0?r>o:o>r;s=r>=0?++o:--o)e=i[s],n=this.item_template.clone(),l=n.find(">a"),l.attr("data-value",e.value),l.text(e.label),this.list.find(">ul").append(n);else this.btn.addClass("disabled");return this.btn.removeClass("opened"),this.is_opened=!1,this.is_enabled=!0,this.setInteractions()},i.prototype.enableFilter=function(){return this.is_enabled=!0},i.prototype.disableFilter=function(){return this.is_enabled=!1},i.prototype.setInteractions=function(){return this.btn.bind("click",this.onButtonClick),this.list.find(">ul >li >a").bind("click",this.onItemClick)},i.prototype.onButtonClick=function(t){return t.preventDefault(),this.btn.hasClass("disabled")?void 0:this.is_opened?this.closeList():this.openList()},i.prototype.onItemClick=function(t){var i;return t.preventDefault(),this.is_enabled?(event_emitter.emitEvent("DISABLE_FILTERS"),i=$(t.currentTarget),this.value=i.attr("data-value"),this.updateLabel(i.text()),this.closeList(!0)):void 0},i.prototype.updateLabel=function(t){return this.label.text(t)},i.prototype.openList=function(){var t=this;return this.is_enabled?(this.btn.addClass("opened"),this.list.css({visibility:"visible"}),TweenLite.to(this.list,this.dur,{css:{opacity:"1"},ease:Power4.easeInOut,onComplete:function(){return t.is_opened=!0}})):void 0},i.prototype.closeList=function(t){var i=this;return null==t&&(t=!1),t&&event_emitter.emitEvent("CLOSE_FILTERS",[this.param]),this.btn.removeClass("opened"),TweenLite.to(this.list,this.dur,{css:{opacity:"0"},ease:Power4.easeInOut,onComplete:function(){return i.list.css({visibility:"hidden"}),i.is_opened=!1,t?event_emitter.emitEvent("FILTER_UPDATED",[i.param,i.value]):void 0}})},i}()}).call(this);
