(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};window.FilteredGrid=function(){function e(e){this.ref=e,this.onDataError=t(this.onDataError,this),this.onDataLoaded=t(this.onDataLoaded,this),this.updateFilters=t(this.updateFilters,this),this.closeFilters=t(this.closeFilters,this),this.disableFilters=t(this.disableFilters,this),this.enableFilters=t(this.enableFilters,this),this.onFilterUpdated=t(this.onFilterUpdated,this),this.resetFilters=t(this.resetFilters,this),this.is_dev=this.ref.hasClass("js-dev"),this.filters=this.ref.find(".wrap-filter"),this.reset=this.ref.find("a.clear"),this.grid=this.ref.find(".js-grid"),this.items=this.grid.find(".item"),this.cols=4,event_emitter.addListener("ENABLE_FILTERS",this.enableFilters),event_emitter.addListener("DISABLE_FILTERS",this.disableFilters),event_emitter.addListener("CLOSE_FILTERS",this.closeFilters),this.filters.length>0&&(this.filters_tot=this.filters.length,this.filters_array=[],this.setFilters()),this.reset.bind("click",this.resetFilters),this.items_tot=this.items.length,this.items_array=[],this.setItems()}return e.prototype.setFilters=function(){var t,e,s,i,r,a,n;for(event_emitter.addListener("FILTER_UPDATED",this.onFilterUpdated),n=[],t=r=0,a=this.filters_tot;a>=0?a>r:r>a;t=a>=0?++r:--r)i=$(this.filters[t]),s=i.attr("data-filter"),e=new FilterDropdown(i,s),n.push(this.filters_array.push({param:s,value:"",instance:e}));return n},e.prototype.resetFilters=function(){var t,e,s,i;for(e=!0,t=s=0,i=this.filters_tot;i>=0?i>s:s>i;t=i>=0?++s:--s)this.filters_array[t].instance.is_enabled===!1&&(e=!1);return e?(this.disableFilters(),this.loadData(!0)):void 0},e.prototype.onFilterUpdated=function(){return this.loadData()},e.prototype.enableFilters=function(){var t,e,s,i;for(i=[],t=e=0,s=this.filters_tot;s>=0?s>e:e>s;t=s>=0?++e:--e)i.push(this.filters_array[t].instance.enableFilter());return i},e.prototype.disableFilters=function(){var t,e,s,i;for(i=[],t=e=0,s=this.filters_tot;s>=0?s>e:e>s;t=s>=0?++e:--e)i.push(this.filters_array[t].instance.disableFilter());return i},e.prototype.closeFilters=function(t){var e,s,i,r,a;for(a=[],s=i=0,r=this.filters_tot;r>=0?r>i:i>r;s=r>=0?++i:--i)e=this.filters_array[s].instance,e.is_opened&&e.param!==t?a.push(e.closeList()):a.push(void 0);return a},e.prototype.updateFilters=function(t){var e,s,i,r,a,n,o,h;for(h=[],s=n=0,o=t.length;o>=0?o>n:n>o;s=o>=0?++n:--n)r=t[s],a=r.filter,h.push(function(){var t,s,n;for(n=[],i=t=0,s=this.filters_tot;s>=0?s>t:t>s;i=s>=0?++t:--t)e=this.filters_array[i],e.param===a?n.push(e.instance.initFilter(r)):n.push(void 0);return n}.call(this));return h},e.prototype.setItems=function(){var t,e,s,i,r,a;for(a=[],t=i=0,r=this.items_tot;r>=0?r>i:i>r;t=r>=0?++i:--i)s=$(this.items[t]),e=s.attr("data-id"),this.items_array.push({id:e,ref:s}),0===(t+1)%this.cols?a.push(s.addClass("last")):a.push(void 0);return a},e.prototype.updateItems=function(t){var e,s,i,r,a,n,o,h,l,d,f;for(i=o=0,l=this.items_tot;l>=0?l>o:o>l;i=l>=0?++o:--o)this.items_array[i].ref.removeClass("last").hide();for(e=0,s=0,f=[],i=h=0,d=t.length;d>=0?d>h:h>d;i=d>=0?++h:--h)r=t[i],f.push(function(){var t,i,o;for(o=[],n=t=0,i=this.items_tot;i>=0?i>t:t>i;n=i>=0?++t:--t)a=this.items_array[n],a.id===r?(0===(e+1)%this.cols&&a.ref.addClass("last"),a.ref.css({opacity:"0"}).show(),TweenLite.to(a.ref,1,{css:{opacity:"1"},delay:s,ease:Power4.easeInOut}),e++,o.push(s+=.25)):o.push(void 0);return o}.call(this));return f},e.prototype.loadData=function(t){var e,s,i,r,a,n;for(null==t&&(t=!1),r={action:"press"},i=a=0,n=this.filters_tot;n>=0?n>a:a>n;i=n>=0?++a:--a)s=this.filters_array[i],r[s.param]=t?"":s.instance.value;return this.is_dev?(e="../public/json/press.json",$.getJSON(e,this.onDataLoaded)):$.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:r,success:this.onDataLoaded,error:this.onDataError})},e.prototype.onDataLoaded=function(t){return this.filters.length>0&&this.updateFilters(t.filters),this.updateItems(t.items),this.enableFilters()},e.prototype.onDataError=function(){return this.enableFilters()},e}()}).call(this);
