(function(){var i=function(i,t){return function(){return i.apply(t,arguments)}};window.RailsShifter=function(){function t(t){this.ref=t,this.onResize=i(this.onResize,this),this.onScroll=i(this.onScroll,this),this.onImageLoaded=i(this.onImageLoaded,this),this.doc=$(document),this.w=$(window),this.rail_1=this.ref.find(".rail-1"),this.rail_2=this.ref.find(".rail-2"),this.rail_1_el=this.rail_1.find(".creative-vision"),this.rail_2_el=this.rail_2.find(".the-designer"),this.images=this.ref.find("img"),this.images_tot=this.images.length,this.images_loaded=0,this.top=this.rail_1.offset().top,this.is_enabled=!1,this.rail_1.addClass("shifter"),this.preloadImages()}return t.prototype.preloadImages=function(){var i,t,s,e,a,o,h;for(event_emitter.addListener("IMAGE_LOADED",this.onImageLoaded),h=[],i=a=0,o=this.images_tot;o>=0?o>a:a>o;i=o>=0?++a:--a)t=$(this.images[i]),e=t.attr("src"),s=new Image,s.onload=this.onImageLoaded,h.push(s.src=e);return h},t.prototype.onImageLoaded=function(){return this.images_loaded++,this.images_loaded===this.images_tot?(this.resetBreakpoints(),this.is_enabled=!0):void 0},t.prototype.resetBreakpoints=function(){return this.breakpoint_1=this.rail_2_el.offset().top+.6*(this.w.width()/1024)*this.rail_2_el.height(),this.breakpoint_2=this.rail_1_el.offset().top-window.small_header_height,this.acc=this.breakpoint_2/(this.breakpoint_2-this.breakpoint_1),this.scroll_amp=this.doc.height()-this.w.height()},t.prototype.onScroll=function(i){var t;return this.is_enabled&&(i>this.breakpoint_1?(this.rail_1.hasClass("more-affracchievole")||this.rail_1.addClass("more-affracchievole"),this.breakpoint_2>i&&this.rail_1.css({top:""+(i-this.acc*(i-this.breakpoint_1))+"px"})):this.rail_1.hasClass("more-affracchievole")&&(this.rail_1.removeClass("more-affracchievole"),this.rail_1.css({top:""+this.top+"px"})),this.rail_1.hasClass("more-affracchievole")&&i>=this.scroll_amp&&(t=parseInt(this.rail_1.css("top")),!isNaN(t)&&t>this.top))?this.rail_1.css({top:""+this.top+"px"}):void 0},t.prototype.onResize=function(){return this.is_enabled?this.resetBreakpoints():void 0},t}()}).call(this);
