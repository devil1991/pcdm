(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};window.SocialSharing=function(){function e(e){this.ref=e,this.setButton=t(this.setButton,this),this.onSharingDataUpdated=t(this.onSharingDataUpdated,this),this.meta_title=$("meta[property='og:title']").attr("content"),this.meta_image=$("meta[property='og:image']").attr("content"),this.meta_description=$("meta[property='og:description']").attr("content"),this.loc=window.location.href.replace("#",""),this.checkButtons(),event_emitter.addListener("UPDATE_SHARING_DATA",this.onSharingDataUpdated)}return e.prototype.onSharingDataUpdated=function(t,e){return t===this.ref.attr("id")?(this.meta_title=e.title,this.meta_image=e.image,this.meta_description=e.description,this.loc=e.url,this.checkButtons()):void 0},e.prototype.checkButtons=function(){var t,e,i,n,o,r,a,h,s,c,p,u,d,l,m,f,g,w,_;return o=this.ref.find(".facebook a"),1===o.length&&(r=encodeURI("http://www.facebook.com/sharer.php?u="+this.loc),this.setButton(o,r)),f=this.ref.find(".twitter a"),1===f.length&&(g=encodeURI("http://twitter.com/share?text="+this.meta_title+"&url="+this.loc),this.setButton(f,g)),a=this.ref.find(".gp a"),1===a.length&&(h=encodeURI("https://plus.google.com/share?url="+this.loc),this.setButton(a,h)),s=this.ref.find(".pinterest a"),1===s.length&&(c=encodeURI("http://pinterest.com/pin/create/button?url="+this.loc+"&media="+this.meta_image+"&description="+this.meta_description),this.setButton(s,c)),p=this.ref.find(".tumblr a"),1===p.length&&(l=encodeURIComponent(this.meta_image),u=encodeURIComponent(this.meta_description),d=encodeURIComponent(this.loc),m="http://www.tumblr.com/share/photo?source="+l+"&caption="+u+"&click_thru="+d,this.setButton(p,m)),w=this.ref.find(".weibo a"),1===w.length&&(_=encodeURI("http://service.weibo.com/share/share.php?url="+this.loc+"&title="+this.meta_title+"&pic="+this.meta_image),this.setButton(w,_)),e=this.ref.find(".email a"),1===e.length?(i=e.attr("data-subject"),t=e.attr("data-body"),n=encodeURI("mailto:?subject="+i+"&body="+t+this.loc),this.setButton(e,n,!0)):void 0},e.prototype.setButton=function(t,e,i){return null==i&&(i=!1),t.attr("href",e),i?void 0:t.bind("click",function(t){return t.preventDefault(),window.open($(t.currentTarget).attr("href"),"Share","toolbar=0,status=0,width=900,height=500")})},e}()}).call(this);