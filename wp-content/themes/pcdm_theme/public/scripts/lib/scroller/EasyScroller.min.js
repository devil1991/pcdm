var EasyScroller=function(t,e){this.content=t,this.container=t.parentNode,this.options=e||{};var n=this;this.scroller=new Scroller(function(t,e,o){n.render(t,e,o)},e),this.bindEvents(),this.content.style[EasyScroller.vendorPrefix+"TransformOrigin"]="left top",this.reflow()};EasyScroller.prototype.render=function(){var t,e=document.documentElement.style;window.opera&&"[object Opera]"===Object.prototype.toString.call(opera)?t="presto":"MozAppearance"in e?t="gecko":"WebkitAppearance"in e?t="webkit":"string"==typeof navigator.cpuClass&&(t="trident");var n,o=EasyScroller.vendorPrefix={trident:"ms",gecko:"Moz",webkit:"Webkit",presto:"O"}[t],i=document.createElement("div"),r=o+"Perspective",c=o+"Transform";return i.style[r]!==n?function(t,e,n){this.content.style[c]="translate3d("+-t+"px,"+-e+"px,0) scale("+n+")"}:i.style[c]!==n?function(t,e,n){this.content.style[c]="translate("+-t+"px,"+-e+"px) scale("+n+")"}:function(t,e,n){this.content.style.marginLeft=t?-t/n+"px":"",this.content.style.marginTop=e?-e/n+"px":"",this.content.style.zoom=n||""}}(),EasyScroller.prototype.reflow=function(){this.scroller.setDimensions(this.container.clientWidth,this.container.clientHeight,this.content.offsetWidth,this.content.offsetHeight);var t=this.container.getBoundingClientRect();this.scroller.setPosition(t.left+this.container.clientLeft,t.top+this.container.clientTop)},EasyScroller.prototype.bindEvents=function(){var t=this;if(window.addEventListener("resize",function(){t.reflow()},!1),"ontouchstart"in window)this.container.addEventListener("touchstart",function(e){e.touches[0]&&e.touches[0].target&&e.touches[0].target.tagName.match(/input|textarea|select/i)||(t.scroller.doTouchStart(e.touches,e.timeStamp),e.preventDefault())},!1),document.addEventListener("touchmove",function(e){t.scroller.doTouchMove(e.touches,e.timeStamp,e.scale)},!1),document.addEventListener("touchend",function(e){t.scroller.doTouchEnd(e.timeStamp)},!1),document.addEventListener("touchcancel",function(e){t.scroller.doTouchEnd(e.timeStamp)},!1);else{var e=!1;this.container.addEventListener("mousedown",function(n){n.target.tagName.match(/input|textarea|select/i)||(t.scroller.doTouchStart([{pageX:n.pageX,pageY:n.pageY}],n.timeStamp),e=!0,n.preventDefault())},!1),document.addEventListener("mousemove",function(n){e&&(t.scroller.doTouchMove([{pageX:n.pageX,pageY:n.pageY}],n.timeStamp),e=!0)},!1),document.addEventListener("mouseup",function(n){e&&(t.scroller.doTouchEnd(n.timeStamp),e=!1)},!1),this.container.addEventListener("mousewheel",function(e){t.options.zooming&&(t.scroller.doMouseZoom(e.wheelDelta,e.timeStamp,e.pageX,e.pageY),e.preventDefault())},!1)}};
