(function(){var t=function(t,i){return function(){return t.apply(i,arguments)}};window.CollectionDetails=function(){function i(i,e,s){this.ref=i,this.id_array=e,this.is_dev=s,this.onResize=t(this.onResize,this),this.onContentsRemoved=t(this.onContentsRemoved,this),this.removeContents=t(this.removeContents,this),this.onBackClick=t(this.onBackClick,this),this.renderContents=t(this.renderContents,this),this.onDataError=t(this.onDataError,this),this.onDataLoaded=t(this.onDataLoaded,this),this.updateContents=t(this.updateContents,this),this.onNextClick=t(this.onNextClick,this),this.onPrevClick=t(this.onPrevClick,this),this.loader=this.ref.siblings(".loader"),this.img=this.ref.find(".img-detail"),this.number_txt=this.ref.find(".wrap-text .number"),this.collection_txt=this.ref.find(".wrap-text .collection"),this.title_txt=this.ref.find(".wrap-text .title"),this.description_txt=this.ref.find(".wrap-text .description"),this.prev_btn=this.ref.find("a.previous"),this.next_btn=this.ref.find("a.next"),this.back_btn=this.ref.find("a.back"),this.callback_url=this.ref.attr("data-callback"),this.sharing_id=this.ref.find(".js-sharing").attr("id"),this.current_id,this.data={},this.img_ratio,this.setInteractions(),event_emitter.addListener("IMAGE_LOADED",this.renderContents)}return i.prototype.setInteractions=function(){return this.prev_btn.bind("click",this.onPrevClick),this.next_btn.bind("click",this.onNextClick),this.back_btn.bind("click",this.onBackClick)},i.prototype.onPrevClick=function(t){var i;return t.preventDefault(),i=$(t.currentTarget),i.hasClass("disabled")?void 0:this.updateDetails(-1)},i.prototype.onNextClick=function(t){var i;return t.preventDefault(),i=$(t.currentTarget),i.hasClass("disabled")?void 0:this.updateDetails(1)},i.prototype.updateDetails=function(t){var i;return is_switching?void 0:(window.is_switching=!0,i=this.id_array[this.getCurrentIndex()+t],event_emitter.emitEvent("UPDATE_DETAILS",[i]))},i.prototype.getCurrentIndex=function(){var t,i,e,s;for(i=0,t=e=0,s=this.id_array.length;s>=0?s>e:e>s;t=s>=0?++e:--e)this.id_array[t]===this.current_id&&(i=t);return i},i.prototype.updateContents=function(t){return this.current_id=t,this.checkButtons(),this.unloadContents(),this.ref.css({visibility:"hidden"}),this.ref.show(),this.loader.show(),this.loadData()},i.prototype.checkButtons=function(){var t;if(t=this.getCurrentIndex(),0===t){if(this.prev_btn.addClass("disabled"),this.next_btn.hasClass("disabled"))return this.next_btn.removeClass("disabled")}else{if(t===this.id_array.length-1)return this.prev_btn.hasClass("disabled")&&this.prev_btn.removeClass("disabled"),this.next_btn.addClass("disabled");if(this.prev_btn.hasClass("disabled")&&this.prev_btn.removeClass("disabled"),this.next_btn.hasClass("disabled"))return this.next_btn.removeClass("disabled")}},i.prototype.unloadContents=function(){return this.img.attr("src","")},i.prototype.loadData=function(){var t;return this.is_dev?(t="../public/json/product_details.json",$.getJSON(t,this.onDataLoaded)):$.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:{action:"product_details",product_id:this.current_id},success:this.onDataLoaded,error:this.onDataError})},i.prototype.onDataLoaded=function(t){var i;return this.data=t.details,i=is_smartphone?this.data.img_mobile:this.data.img,this.loadImage(i)},i.prototype.onDataError=function(){},i.prototype.loadImage=function(t){var i;return this.img.attr("src",t),i=new Image,i.onload=this.onImageLoaded,i.src=t},i.prototype.onImageLoaded=function(){var t;return t=this.width/this.height,event_emitter.emitEvent("IMAGE_LOADED",[t])},i.prototype.renderContents=function(t){return this.img_ratio=t,this.loader.hide(),this.number_txt.html(this.data.number),this.collection_txt.html(this.data.collection),this.title_txt.html(this.data.title),this.description_txt.html(this.data.description),event_emitter.emitEvent("UPDATE_SHARING_DATA",[this.sharing_id,this.data.sharing]),this.onResize(),this.ref.css({opacity:"0",visibility:"visible"}),TweenLite.to(this.ref,1,{css:{opacity:"1"},ease:Power4.easeInOut}),window.is_switching=!1},i.prototype.onBackClick=function(t){return t.preventDefault(),is_switching?void 0:(window.is_switching=!0,event_emitter.emitEvent("SWITCH_TO_GRID"))},i.prototype.removeContents=function(){return TweenLite.to(this.ref,1,{css:{opacity:"0"},ease:Power4.easeInOut,onComplete:this.onContentsRemoved})},i.prototype.onContentsRemoved=function(){return this.ref.hide(),event_emitter.emitEvent("DETAILS_HIDDEN",[this.current_id])},i.prototype.onResize=function(){},i}()}).call(this);
